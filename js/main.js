/*! For license information please see main.js.LICENSE.txt */
(()=>{var __webpack_modules__={249:function(t,e,n){var r;t.exports=(r=r||function(t,e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(480)}catch(t){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),a={},u=a.lib={},s=u.Base={extend:function(t){var e=o(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},f=u.WordArray=s.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=a<<24-(r+o)%4*8}else for(var u=0;u<i;u+=4)e[r+u>>>2]=n[u>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=s.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(i());return new f.init(e,t)}}),c=a.enc={},l=c.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new f.init(n,e/2)}},p=c.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new f.init(n,e)}},h=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(p.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return p.parse(unescape(encodeURIComponent(t)))}},m=u.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,u=o/(4*a),s=(u=e?t.ceil(u):t.max((0|u)-this._minBufferSize,0))*a,c=t.min(4*s,o);if(s){for(var l=0;l<s;l+=a)this._doProcessBlock(i,l);n=i.splice(0,s),r.sigBytes-=c}return new f.init(n,c)},clone:function(){var t=s.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),d=(u.Hasher=m.extend({cfg:s.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new d.HMAC.init(t,n).finalize(e)}}}),a.algo={});return a}(Math),r)},214:function(t,e,n){var r;t.exports=(r=n(249),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,a=e.algo,u=[];!function(){for(var e=0;e<64;e++)u[e]=4294967296*t.abs(t.sin(e+1))|0}();var s=a.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=t[e+0],s=t[e+1],h=t[e+2],m=t[e+3],d=t[e+4],g=t[e+5],y=t[e+6],v=t[e+7],w=t[e+8],b=t[e+9],x=t[e+10],_=t[e+11],A=t[e+12],E=t[e+13],S=t[e+14],T=t[e+15],P=o[0],O=o[1],B=o[2],R=o[3];P=f(P,O,B,R,a,7,u[0]),R=f(R,P,O,B,s,12,u[1]),B=f(B,R,P,O,h,17,u[2]),O=f(O,B,R,P,m,22,u[3]),P=f(P,O,B,R,d,7,u[4]),R=f(R,P,O,B,g,12,u[5]),B=f(B,R,P,O,y,17,u[6]),O=f(O,B,R,P,v,22,u[7]),P=f(P,O,B,R,w,7,u[8]),R=f(R,P,O,B,b,12,u[9]),B=f(B,R,P,O,x,17,u[10]),O=f(O,B,R,P,_,22,u[11]),P=f(P,O,B,R,A,7,u[12]),R=f(R,P,O,B,E,12,u[13]),B=f(B,R,P,O,S,17,u[14]),P=c(P,O=f(O,B,R,P,T,22,u[15]),B,R,s,5,u[16]),R=c(R,P,O,B,y,9,u[17]),B=c(B,R,P,O,_,14,u[18]),O=c(O,B,R,P,a,20,u[19]),P=c(P,O,B,R,g,5,u[20]),R=c(R,P,O,B,x,9,u[21]),B=c(B,R,P,O,T,14,u[22]),O=c(O,B,R,P,d,20,u[23]),P=c(P,O,B,R,b,5,u[24]),R=c(R,P,O,B,S,9,u[25]),B=c(B,R,P,O,m,14,u[26]),O=c(O,B,R,P,w,20,u[27]),P=c(P,O,B,R,E,5,u[28]),R=c(R,P,O,B,h,9,u[29]),B=c(B,R,P,O,v,14,u[30]),P=l(P,O=c(O,B,R,P,A,20,u[31]),B,R,g,4,u[32]),R=l(R,P,O,B,w,11,u[33]),B=l(B,R,P,O,_,16,u[34]),O=l(O,B,R,P,S,23,u[35]),P=l(P,O,B,R,s,4,u[36]),R=l(R,P,O,B,d,11,u[37]),B=l(B,R,P,O,v,16,u[38]),O=l(O,B,R,P,x,23,u[39]),P=l(P,O,B,R,E,4,u[40]),R=l(R,P,O,B,a,11,u[41]),B=l(B,R,P,O,m,16,u[42]),O=l(O,B,R,P,y,23,u[43]),P=l(P,O,B,R,b,4,u[44]),R=l(R,P,O,B,A,11,u[45]),B=l(B,R,P,O,T,16,u[46]),P=p(P,O=l(O,B,R,P,h,23,u[47]),B,R,a,6,u[48]),R=p(R,P,O,B,v,10,u[49]),B=p(B,R,P,O,S,15,u[50]),O=p(O,B,R,P,g,21,u[51]),P=p(P,O,B,R,A,6,u[52]),R=p(R,P,O,B,m,10,u[53]),B=p(B,R,P,O,x,15,u[54]),O=p(O,B,R,P,s,21,u[55]),P=p(P,O,B,R,w,6,u[56]),R=p(R,P,O,B,T,10,u[57]),B=p(B,R,P,O,y,15,u[58]),O=p(O,B,R,P,E,21,u[59]),P=p(P,O,B,R,d,6,u[60]),R=p(R,P,O,B,_,10,u[61]),B=p(B,R,P,O,h,15,u[62]),O=p(O,B,R,P,b,21,u[63]),o[0]=o[0]+P|0,o[1]=o[1]+O|0,o[2]=o[2]+B|0,o[3]=o[3]+R|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var o=t.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(n.length+1),this._process();for(var u=this._hash,s=u.words,f=0;f<4;f++){var c=s[f];s[f]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return u},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function f(t,e,n,r,i,o,a){var u=t+(e&n|~e&r)+i+a;return(u<<o|u>>>32-o)+e}function c(t,e,n,r,i,o,a){var u=t+(e&r|n&~r)+i+a;return(u<<o|u>>>32-o)+e}function l(t,e,n,r,i,o,a){var u=t+(e^n^r)+i+a;return(u<<o|u>>>32-o)+e}function p(t,e,n,r,i,o,a){var u=t+(n^(e|~r))+i+a;return(u<<o|u>>>32-o)+e}e.MD5=o._createHelper(s),e.HmacMD5=o._createHmacHelper(s)}(Math),r.MD5)},927:module=>{var factory;window,factory=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./src/jepub.js")}({"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},"./node_modules/@babel/runtime/helpers/interopRequireWildcard.js":function(t,e,n){var r=n("./node_modules/@babel/runtime/helpers/typeof.js");function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}t.exports=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}},"./node_modules/@babel/runtime/helpers/typeof.js":function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},"./node_modules/base64-js/index.js":function(t,e,n){"use strict";e.byteLength=function(t){var e=f(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=f(t),a=r[0],u=r[1],s=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,u)),c=0,l=u>0?a-4:a;for(n=0;n<l;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],s[c++]=e>>16&255,s[c++]=e>>8&255,s[c++]=255&e;return 2===u&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,s[c++]=255&e),1===u&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,s[c++]=e>>8&255,s[c++]=255&e),s},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=16383,u=0,s=n-i;u<s;u+=a)o.push(c(t,u,u+a>s?s:u+a));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=a.length;u<s;++u)r[u]=a[u],i[a.charCodeAt(u)]=u;function f(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var i,o,a=[],u=e;u<n;u+=3)i=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},"./node_modules/buffer/index.js":function(t,e,n){"use strict";(function(t){var r=n("./node_modules/base64-js/index.js"),i=n("./node_modules/ieee754/index.js"),o=n("./node_modules/buffer/node_modules/isarray/index.js");function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=s.prototype:(null===t&&(t=new s(e)),t.length=e),t}function s(t,e,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return f(this,t,e,n)}function f(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),s.TYPED_ARRAY_SUPPORT?(t=e).__proto__=s.prototype:t=p(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|m(e,n),i=(t=u(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(s.isBuffer(e)){var n=0|h(e.length);return 0===(t=u(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?u(t,0):p(t,e);if("Buffer"===e.type&&o(e.data))return p(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(c(e),t=u(t,e<0?0:0|h(e)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e){var n=e.length<0?0:0|h(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function m(t,e){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(t).length;default:if(r)return q(t).length;e=(""+e).toLowerCase(),r=!0}}function d(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return O(this,e,n);case"latin1":case"binary":return B(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e)return e&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var o,a=1,u=t.length,s=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,u/=2,s/=2,n/=2}function f(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=n;o<u;o++)if(f(t,o)===f(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===s)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+s>u&&(n=u-s),o=n;o>=0;o--){for(var l=!0,p=0;p<s;p++)if(f(t,o+p)!==f(e,p)){l=!1;break}if(l)return o}return-1}function w(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var u=parseInt(e.substr(2*a,2),16);if(isNaN(u))return a;t[n+a]=u}return a}function b(t,e,n,r){return Y(q(e,t.length-n),t,n,r)}function x(t,e,n,r){return Y(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _(t,e,n,r){return x(t,e,n,r)}function A(t,e,n,r){return Y(F(e),t,n,r)}function E(t,e,n,r){return Y(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,u,s,f=t[i],c=null,l=f>239?4:f>223?3:f>191?2:1;if(i+l<=n)switch(l){case 1:f<128&&(c=f);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&f)<<6|63&o)>127&&(c=s);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(s=(15&f)<<12|(63&o)<<6|63&a)>2047&&(s<55296||s>57343)&&(c=s);break;case 4:o=t[i+1],a=t[i+2],u=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&u)&&(s=(15&f)<<18|(63&o)<<12|(63&a)<<6|63&u)>65535&&s<1114112&&(c=s)}null===c?(c=65533,l=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=l}return function(t){var e=t.length;if(e<=P)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=P));return n}(r)}e.Buffer=s,e.SlowBuffer=function(t){return+t!=t&&(t=0),s.alloc(+t)},e.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,n){return f(null,t,e,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?u(t,e):void 0!==n?"string"==typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}(null,t,e,n)},s.allocUnsafe=function(t){return l(null,t)},s.allocUnsafeSlow=function(t){return l(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=s.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},s.byteLength=m,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):d.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,r,i){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),u=Math.min(o,a),f=this.slice(r,i),c=t.slice(e,n),l=0;l<u;++l)if(f[l]!==c[l]){o=f[l],a=c[l];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return x(this,t,e,n);case"latin1":case"binary":return _(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function B(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function R(t,e,n){var r,i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var o="",a=e;a<n;++a)o+=(r=t[a])<16?"0"+r.toString(16):r.toString(16);return o}function k(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function C(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function U(t,e,n,r,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function I(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function j(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,o){return o||D(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function M(t,e,n,r,o){return o||D(t,0,n,8),i.write(t,e,n,r,52,8),n+8}s.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=s.prototype;else{var i=e-t;n=new s(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},s.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},s.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},s.prototype.readUInt8=function(t,e){return e||C(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||C(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||C(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){e||C(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){e||C(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||C(t,4,this.length),i.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||C(t,4,this.length),i.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||C(t,8,this.length),i.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||C(t,8,this.length),i.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||U(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},s.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||U(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):j(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);U(this,t,e,n,i-1,-i)}var o=0,a=1,u=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===u&&0!==this[e+o-1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);U(this,t,e,n,i-1,-i)}var o=n-1,a=1,u=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===u&&0!==this[e+o+1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):j(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return M(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return M(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=s.isBuffer(t)?t:q(new s(t,r).toString()),u=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%u]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function q(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function F(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(N,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Y(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/buffer/node_modules/isarray/index.js":function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},"./node_modules/file-type/index.js":function(module,exports,__nested_webpack_require_61130__){"use strict";(function(Buffer){const toBytes=t=>[...t].map((t=>t.charCodeAt(0))),xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(t,e=0){let n=t[e],r=1,i=0;for(;++i<8;)r*=256,n+=t[e+i]*r;return n}const fileType=t=>{if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||Buffer.isBuffer(t)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof t}\``);const e=t instanceof Uint8Array?t:new Uint8Array(t);if(!(e&&e.length>1))return null;const n=(t,n)=>{n=Object.assign({offset:0},n);for(let r=0;r<t.length;r++)if(n.mask){if(t[r]!==(n.mask[r]&e[r+n.offset]))return!1}else if(t[r]!==e[r+n.offset])return!1;return!0},r=(t,e)=>n(toBytes(t),e);if(n([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(n([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(n([71,73,70]))return{ext:"gif",mime:"image/gif"};if(n([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(n([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((n([73,73,42,0])||n([77,77,0,42]))&&n([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(n([73,73,42,0])||n([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(n([66,77]))return{ext:"bmp",mime:"image/bmp"};if(n([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(n([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(n([80,75,3,4])){if(n([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(n(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(r("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(r("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(r("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const t=(t,e=0)=>t.findIndex(((t,n,r)=>n>=e&&80===r[n]&&75===r[n+1]&&3===r[n+2]&&4===r[n+3]));let i=0,o=!1,a=null;do{const u=i+30;if(o||(o=n(oxmlContentTypes,{offset:u})||n(oxmlRels,{offset:u})),a||(r("word/",{offset:u})?a={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:r("ppt/",{offset:u})?a={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:r("xl/",{offset:u})&&(a={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),o&&a)return a;i=t(e,u)}while(i>=0);if(a)return a}if(n([80,75])&&(3===e[2]||5===e[2]||7===e[2])&&(4===e[3]||6===e[3]||8===e[3]))return{ext:"zip",mime:"application/zip"};if(n([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(n([82,97,114,33,26,7])&&(0===e[6]||1===e[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(n([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(n([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(n([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(n([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(n([51,103,112,53])||n([0,0,0])&&n([102,116,121,112],{offset:4})&&(n([109,112,52,49],{offset:8})||n([109,112,52,50],{offset:8})||n([105,115,111,109],{offset:8})||n([105,115,111,50],{offset:8})||n([109,109,112,52],{offset:8})||n([77,52,86],{offset:8})||n([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(n([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(n([26,69,223,163])){const t=e.subarray(4,4100),n=t.findIndex(((t,e,n)=>66===n[e]&&130===n[e+1]));if(-1!==n){const e=n+3,r=n=>[...n].every(((n,r)=>t[e+r]===n.charCodeAt(0)));if(r("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(r("webm"))return{ext:"webm",mime:"video/webm"}}}if(n([0,0,0,20,102,116,121,112,113,116,32,32])||n([102,114,101,101],{offset:4})||n([102,116,121,112,113,116,32,32],{offset:4})||n([109,100,97,116],{offset:4})||n([109,111,111,118],{offset:4})||n([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(n([82,73,70,70])){if(n([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(n([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(n([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(n([48,38,178,117,142,102,207,17,166,217])){let t=30;do{const r=readUInt64LE(e,t+16);if(n([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:t})){if(n([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:t+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(n([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:t+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}t+=r}while(t+24<=e.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(n([0,0,1,186])||n([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(n([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let t=0;t<2&&t<e.length-16;t++){if(n([73,68,51],{offset:t})||n([255,226],{offset:t,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(n([255,228],{offset:t,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(n([255,248],{offset:t,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(n([255,240],{offset:t,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(n([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(n([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(n([79,103,103,83]))return n([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:n([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:n([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:n([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:n([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(n([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(n([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(n([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(n([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(n([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(n([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((67===e[0]||70===e[0])&&n([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(n([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(n([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(n([119,79,70,70])&&(n([0,1,0,0],{offset:4})||n([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(n([119,79,70,50])&&(n([0,1,0,0],{offset:4})||n([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(n([76,80],{offset:34})&&(n([0,0,1],{offset:8})||n([1,0,2],{offset:8})||n([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(n([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(n([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(n([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(n([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(n([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(n([37,33]))return{ext:"ps",mime:"application/postscript"};if(n([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(n([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(n([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(n([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(n([77,83,67,70])||n([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(n([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(n([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(n([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(n([31,160])||n([31,157]))return{ext:"Z",mime:"application/x-compress"};if(n([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(n([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(n([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(n([71],{offset:4})&&(n([71],{offset:192})||n([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(n([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(n([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(n([0,0,0,12,106,80,32,32,13,10,135,10])){if(n([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(n([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(n([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(n([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(n([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(r("<?xml "))return{ext:"xml",mime:"application/xml"};if(n([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(n([102,116,121,112],{offset:4})){if(n([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(n([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(n([104,101,105,99],{offset:8})||n([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(n([104,101,118,99],{offset:8})||n([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return n([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:n([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:n([77,80,43])||n([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:n([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:n([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:n([212,195,178,161])||n([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=readableStream=>new Promise(((resolve,reject)=>{const stream=eval("require")("stream");readableStream.once("readable",(()=>{const t=new stream.PassThrough,e=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{t.fileType=fileType(e)}catch(t){reject(t)}readableStream.unshift(e),stream.pipeline?resolve(stream.pipeline(readableStream,t,(()=>{}))):resolve(readableStream.pipe(t))}))}))}).call(this,__nested_webpack_require_61130__("./node_modules/buffer/index.js").Buffer)},"./node_modules/ieee754/index.js":function(t,e){e.read=function(t,e,n,r,i){var o,a,u=8*i-r-1,s=(1<<u)-1,f=s>>1,c=-7,l=n?i-1:0,p=n?-1:1,h=t[e+l];for(l+=p,o=h&(1<<-c)-1,h>>=-c,c+=u;c>0;o=256*o+t[e+l],l+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+l],l+=p,c-=8);if(0===o)o=1-f;else{if(o===s)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=f}return(h?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,u,s,f=8*o-i-1,c=(1<<f)-1,l=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,m=r?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),(e+=a+l>=1?p/s:p*Math.pow(2,1-l))*s>=2&&(a++,s/=2),a+l>=c?(u=0,a=c):a+l>=1?(u=(e*s-1)*Math.pow(2,i),a+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;t[n+h]=255&u,h+=m,u/=256,i-=8);for(a=a<<i|u,f+=i;f>0;t[n+h]=255&a,h+=m,a/=256,f-=8);t[n+h-m]|=128*d}},"./node_modules/image-type/index.js":function(t,e,n){"use strict";const r=n("./node_modules/file-type/index.js"),i=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),o=t=>{const e=r(t);return i.has(e&&e.ext)?e:null};t.exports=o,t.exports.default=o,Object.defineProperty(o,"minimumBytes",{value:r.minimumBytes})},"./node_modules/webpack/buildin/global.js":function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},"./src/i18n.json":function(t){t.exports=JSON.parse('{"en":{"code":"en","cover":"Cover","toc":"Table of Contents","info":"Information","note":"Notes"},"vi":{"code":"vi","cover":"Bìa sách","toc":"Mục lục","info":"Giới thiệu","note":"Ghi chú"}}')},"./src/jepub.js":function(t,e,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=n("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("./src/utils.js")),a=r(n("./node_modules/image-type/index.js")),u=r(n("./src/i18n.json")),s=r(n("./src/tpl/META-INF/container.xml")),f=r(n("./src/tpl/OEBPS/front-cover.html.ejs")),c=r(n("./src/tpl/OEBPS/notes.html.ejs")),l=r(n("./src/tpl/OEBPS/page.html.ejs")),p=r(n("./src/tpl/OEBPS/table-of-contents.html.ejs")),h=r(n("./src/tpl/OEBPS/title-page.html.ejs")),m=r(n("./src/tpl/book.opf.ejs")),d=r(n("./src/tpl/mimetype")),g=r(n("./src/tpl/toc.ncx.ejs"));e.default=class{constructor(){this._I18n={},this._Info={},this._Uuid={},this._Date=null,this._Cover=null,this._Pages=[],this._Images=[],this._Zip={}}init(t){if(this._Info=Object.assign({},{i18n:"vi",title:"undefined",author:"undefined",publisher:"undefined",description:"",tags:[]},t),this._Uuid={scheme:"uuid",id:o.uuidv4()},this._Date=o.getISODate(),!u.default[this._Info.i18n])throw"Unknown Language: ".concat(this._Info.i18n);return this._I18n=u.default[this._Info.i18n],this._Zip=new JSZip,this._Zip.file("mimetype",d.default),this._Zip.file("META-INF/container.xml",s.default),this._Zip.file("OEBPS/title-page.html",ejs.render(h.default,{i18n:this._I18n,title:this._Info.title,author:this._Info.author,publisher:this._Info.publisher,description:o.parseDOM(this._Info.description),tags:this._Info.tags},{client:!0})),this}static html2text(t,e=!1){return o.html2text(t,e)}date(t){if(t instanceof Date)return this._Date=o.getISODate(t),this;throw"Date object is not valid"}uuid(t){if(o.isEmpty(t))throw"UUID value is empty";{let e="uuid";return o.validateUrl(t)&&(e="URI"),this._Uuid={scheme:e,id:t},this}}cover(t){let e,n;if(t instanceof Blob)n=t.type,e=o.mime2ext(n);else{if(!(t instanceof ArrayBuffer))throw"Cover data is not valid";e=(0,a.default)(new Uint8Array(t)),e&&(n=e.mime,e=o.mime2ext(n))}if(!e)throw"Cover data is not allowed";return this._Cover={type:n,path:"OEBPS/cover-image.".concat(e)},this._Zip.file(this._Cover.path,t),this._Zip.file("OEBPS/front-cover.html",ejs.render(f.default,{i18n:this._I18n,cover:this._Cover},{client:!0})),this}image(t,e){let n,r;if(t instanceof Blob)r=t.type,n=o.mime2ext(r);else{if(!(t instanceof ArrayBuffer))throw"Image data is not valid";n=(0,a.default)(new Uint8Array(t)),r=n.mime,n&&(n=o.mime2ext(r))}if(!n)throw"Image data is not allowed";const i="assets/".concat(e,".").concat(n);return this._Images[e]={type:r,path:i},this._Zip.file("OEBPS/".concat(i),t),this}notes(t){if(o.isEmpty(t))throw"Notes is empty";return this._Zip.file("OEBPS/notes.html",ejs.render(c.default,{i18n:this._I18n,notes:o.parseDOM(t)},{client:!0})),this}add(t,e){if(o.isEmpty(t))throw"Title is empty";if(o.isEmpty(e))throw"Content of ".concat(t," is empty");return Array.isArray(e)||(e=ejs.compile(e,{client:!0})({image:this._Images},(t=>'<img src="'.concat(t?t.path:"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",'" alt=""></img>'))),e=o.parseDOM(e)),this._Zip.file("OEBPS/page-".concat(this._Pages.length,".html"),ejs.render(l.default,{i18n:this._I18n,title:t,content:e},{client:!0})),this._Pages.push(t),this}generate(t="blob",e){if(!JSZip.support[t])throw"This browser does not support ".concat(t);let n=this._Zip.file("OEBPS/notes.html");return n=!!n,this._Zip.file("book.opf",ejs.render(m.default,{i18n:this._I18n,uuid:this._Uuid,date:this._Date,title:this._Info.title,author:this._Info.author,publisher:this._Info.publisher,description:o.html2text(this._Info.description,!0),tags:this._Info.tags,cover:this._Cover,pages:this._Pages,notes:n,images:this._Images},{client:!0})),this._Zip.file("OEBPS/table-of-contents.html",ejs.render(p.default,{i18n:this._I18n,pages:this._Pages},{client:!0})),this._Zip.file("toc.ncx",ejs.render(g.default,{i18n:this._I18n,uuid:this._Uuid,title:this._Info.title,author:this._Info.author,pages:this._Pages,notes:n},{client:!0})),this._Zip.generateAsync({type:t,mimeType:d.default,compression:"DEFLATE",compressionOptions:{level:9}},e)}},t.exports=e.default},"./src/tpl/META-INF/container.xml":function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" ?>\n<container version="1.0" xmlns="urn:oasis:names:tc:opendocument:xmlns:container">\n\t<rootfiles>\n\t\t<rootfile full-path="book.opf" media-type="application/oebps-package+xml" />\n\t</rootfiles>\n</container>'},"./src/tpl/OEBPS/front-cover.html.ejs":function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" ?>\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<%= i18n.code %>">\n\n<head>\n\t<title><%= i18n.cover %></title>\n\t<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />\n</head>\n\n<body>\n\t<div id="cover-image">\n\t\t<img src="../<%= cover.path %>" alt="<%= i18n.cover %>" />\n\t</div>\n</body>\n\n</html>\n'},"./src/tpl/OEBPS/notes.html.ejs":function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" ?>\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<%= i18n.code %>">\n\n<head>\n\t<title><%= i18n.note %></title>\n\t<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />\n</head>\n\n<body>\n\t<div id="notes-page">\n\t\t<div class="ugc">\n            <%- notes %>\n\t\t</div>\n\t</div>\n</body>\n\n</html>\n'},"./src/tpl/OEBPS/page.html.ejs":function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" ?>\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<%= i18n.code %>">\n\n<head>\n\t<title><%= title %></title>\n\t<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />\n</head>\n\n<body>\n\t<div class="chapter type-1">\n\t\t<div class="chapter-title-wrap">\n\t\t\t<h2 class="chapter-title"><%= title %></h2>\n\t\t</div>\n\t\t<div class="ugc chapter-ugc">\n            <% if (Array.isArray(content)) { %>\n                <% content.forEach(item => { %>\n                    <p class="indent"><%= item %></p>\n                <% }); %>\n            <% } else { %>\n                <%- content %>\n            <% } %>\n\t\t</div>\n\t</div>\n</body>\n\n</html>\n'},"./src/tpl/OEBPS/table-of-contents.html.ejs":function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" ?>\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<%= i18n.code %>">\n\n<head>\n\t<title><%= i18n.toc %></title>\n\t<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />\n</head>\n\n<body>\n\t<div id="toc">\n\t\t<h1><%= i18n.toc %></h1>\n\t\t<ul>\n            <% pages.forEach((title, index) => { %>\n                <li class="chaptertype-1">\n                    <a href="page-<%= index %>.html">\n                        <span class="toc-chapter-title"><%= title %></span>\n                    </a>\n                </li>\n            <% }); %>\n\t\t</ul>\n\t</div>\n</body>\n\n</html>\n'},"./src/tpl/OEBPS/title-page.html.ejs":function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" ?>\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<%= i18n.code %>">\n\n<head>\n\t<title><%= i18n.info %></title>\n\t<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />\n</head>\n\n<body>\n\t<div id="title-page">\n\t\t<h1 class="title"><%= title %></h1>\n\t\t<h2 class="subtitle"></h2>\n\t\t<h3 class="author"><%= author %></h3>\n\t\t<h4 class="publisher"><%= publisher %></h4>\n\t</div>\n    <% if (Array.isArray(tags) && tags.length) { %>\n        <div class="part-title-wrap">\n            <% tags = tags.join(\'</code>, <code>\'); %>\n            <code><%- tags %></code>\n        </div>\n    <% } %>\n    <% if (description) { %>\n        <div class="ugc">\n            <%- description %>\n        </div>\n    <% } %>\n</body>\n\n</html>\n'},"./src/tpl/book.opf.ejs":function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" ?>\n<package version="2.0" xmlns="http://www.idpf.org/2007/opf" unique-identifier="PrimaryID">\n\n\t<metadata xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:opf="http://www.idpf.org/2007/opf">\n\t\t<dc:title><%= title %></dc:title>\n\t\t<dc:language><%= i18n.code %></dc:language>\n\t\t<dc:identifier id="PrimaryID" opf:scheme="<%= uuid.scheme %>"><%= uuid.id %></dc:identifier>\n        <dc:date opf:event="publication"><%= date %></dc:date>\n        <% if (description) { %>\n\t\t    <dc:description><%= description %></dc:description>\n        <% } %>\n\t\t<dc:creator opf:role="aut"><%= author %></dc:creator>\n\t\t<dc:publisher><%= publisher %></dc:publisher>\n        <% if (cover) { %>\n\t\t    <meta name="cover" content="cover-image" />\n        <% } %>\n        <% if (Array.isArray(tags) && tags.length) tags.forEach(tag => { %>\n            <dc:subject><%= tag %></dc:subject>\n        <% }); %>\n\t</metadata>\n\n\t<manifest>\n        <% if (cover) { %>\n\t\t    <item id="front-cover" href="OEBPS/front-cover.html" media-type="application/xhtml+xml" />\n        <% } %>\n\t\t<item id="title-page" href="OEBPS/title-page.html" media-type="application/xhtml+xml" />\n\t\t<item id="notes" href="OEBPS/notes.html" media-type="application/xhtml+xml" />\n\t\t<item id="table-of-contents" href="OEBPS/table-of-contents.html" media-type="application/xhtml+xml" />\n        <% pages.forEach((page, index) => { %>\n            <item id="page-<%= index %>" href="OEBPS/page-<%= index %>.html" media-type="application/xhtml+xml" />\n        <% }); %>\n        <% if (cover) { %>\n\t\t    <item id="cover-image" href="<%= cover.path %>" media-type="<%= cover.type %>" />\n        <% } %>\n\t\t<item id="ncx" href="toc.ncx" media-type="application/x-dtbncx+xml" />\n        <% Object.keys(images).forEach(name => { %>\n            <item id="<%= name %>" href="OEBPS/<%= images[name].path %>" media-type="<%= images[name].type %>" />\n        <% }); %>\n\t</manifest>\n\n\t<spine toc="ncx">\n        <% if (cover) { %>\n\t\t    <itemref idref="front-cover" linear="no" />\n        <% } %>\n\t\t<itemref idref="title-page" linear="yes" />\n\t\t<itemref idref="table-of-contents" linear="yes" />\n        <% pages.forEach((page, index) => { %>\n            <itemref idref="page-<%= index %>" linear="yes" />\n        <% }); %>\n        <% if (notes) { %>\n            <itemref idref="notes" linear="yes" />\n        <% } %>\n\t</spine>\n\n\t<guide>\n        <% if (cover) { %>\n\t\t    <reference type="cover" title="<%= i18n.cover %>" href="OEBPS/front-cover.html" />\n        <% } %>\n\t\t<reference type="toc" title="<%= i18n.toc %>" href="OEBPS/table-of-contents.html" />\n\t</guide>\n\n</package>\n'},"./src/tpl/mimetype":function(t,e){t.exports="application/epub+zip"},"./src/tpl/toc.ncx.ejs":function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" ?>\n<!DOCTYPE ncx PUBLIC "-//NISO//DTD ncx 2005-1//EN" "http://www.daisy.org/z3986/2005/ncx-2005-1.dtd">\n\n<ncx version="2005-1" xml:lang="<%= i18n.code %>" xmlns="http://www.daisy.org/z3986/2005/ncx/">\n\t<head>\n\t\t<meta name="dtb:uid" content="<%= uuid.id %>" />\n\t\t<meta name="dtb:depth" content="2" />\n\t\t<meta name="dtb:totalPageCount" content="0" />\n\t\t<meta name="dtb:maxPageNumber" content="0" />\n\t</head>\n\n\t<docTitle>\n\t\t<text><%= title %></text>\n\t</docTitle>\n\n\t<docAuthor>\n\t\t<text><%= author %></text>\n\t</docAuthor>\n\n\t<navMap>\n\t\t<navPoint id="title-page" playOrder="1">\n\t\t\t<navLabel>\n\t\t\t\t<text><%= i18n.info %></text>\n\t\t\t</navLabel>\n\t\t\t<content src="OEBPS/title-page.html" />\n\t\t</navPoint>\n\t\t<navPoint id="table-of-contents" playOrder="2">\n\t\t\t<navLabel>\n\t\t\t\t<text><%= i18n.toc %></text>\n\t\t\t</navLabel>\n\t\t\t<content src="OEBPS/table-of-contents.html" />\n\t\t</navPoint>\n        <% pages.forEach((title, index) => { %>\n            <navPoint id="page-<%= index %>" playOrder="<%= (index + 3) %>">\n                <navLabel>\n                    <text><%= title %></text>\n                </navLabel>\n                <content src="OEBPS/page-<%= index %>.html" />\n            </navPoint>\n        <% }); %>\n        <% if (notes) { %>\n            <navPoint id="notes-page" playOrder="2">\n                <navLabel>\n                    <text><%= i18n.note %></text>\n                </navLabel>\n                <content src="OEBPS/notes.html" />\n            </navPoint>\n        <% } %>\n\t</navMap>\n</ncx>\n'},"./src/utils.js":function(t,e,n){"use strict";function r(t,e=!1){let n=(new DOMParser).parseFromString("<!doctype html><body>".concat(t),"text/html");return e?n.body.textContent.trim():(n=(new XMLSerializer).serializeToString(n.body),n=n.replace(/(^<body\s?[^>]*>|<\/body>$)/g,""),n)}Object.defineProperty(e,"__esModule",{value:!0}),e.uuidv4=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)))},e.isEmpty=function(t){return null===t||"number"!=typeof t&&"string"==typeof t&&!t.trim()},e.getISODate=function(t=new Date){return t.toISOString()},e.parseDOM=r,e.html2text=function(t,e=!1){return t=r(t=(t=(t=(t=(t=(t=(t=t.replace(/<style([\s\S]*?)<\/style>/gi,"")).replace(/<script([\s\S]*?)<\/script>/gi,"")).replace(/<\/(div|p|li|dd|h[1-6])>/gi,"\n")).replace(/<(br|hr)\s*[/]?>/gi,"\n")).replace(/<li>/gi,"+ ")).replace(/<[^>]+>/g,"")).replace(/\n{3,}/g,"\n\n"),!0),e&&(t=t.replace(/\n+/g," ")),t},e.validateUrl=function(t){return/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t)},e.mime2ext=function(t){let e=null;switch(t){case"image/gif":e="gif";break;case"image/apng":e="apng";break;case"image/jpg":case"image/jpeg":e="jpg";break;case"image/png":e="png";break;case"image/webp":e="webp";break;case"image/svg+xml":e="svg";break;case"image/bmp":e="bmp";break;default:e=null}return e}}})},module.exports=factory()},480:()=>{}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var __webpack_exports__={};(()=>{"use strict";var t,e='[ERROR] Error on "%s"',n=function(){function t(t,e){this.name=t,this.executeFunction=e}return t.prototype.run=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.name&&console.log(this.name);try{return this.executeFunction.apply(null,t)}catch(t){var r=e.replace("%s",this.name);throw console.error(r),t}},t}(),r=function(){function t(){this.stepsFlow=[]}return t.prototype.addStep=function(t,e){void 0===e&&(e=[]);for(var n=[],r=0,i=e;r<i.length;r++){for(var o=i[r],a=!1,u=0,s=this.stepsFlow.length;u<s;u++)if(o===this.stepsFlow[u].step){n.push(u),a=!0;break}if(!a)throw new Error("Failed to create execution dependency.")}this.stepsFlow.push({step:t,dependenciesIndex:n})},t.prototype.process=function(t,e){return n=this,r=void 0,o=function(){var n,r,i,o,a,u,s,f,c,l,p,h;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}(this,(function(m){switch(m.label){case 0:n=this.stepsFlow.length,r=[],i=null,e(n),o=0,m.label=1;case 1:if(!(o<n))return[3,6];for(a=this.stepsFlow[o],u=[],s=0,f=a.dependenciesIndex;s<f.length;s++)c=f[s],u.push(r[c]);return l=a.step,(i=l.run.apply(l,u))instanceof Promise?(h=(p=r).push,[4,i]):[3,3];case 2:return h.apply(p,[m.sent()]),[3,4];case 3:r.push(i),m.label=4;case 4:t(o+1),m.label=5;case 5:return o++,[3,1];case 6:return[2,i]}}))},new((i=void 0)||(i=Promise))((function(t,e){function a(t){try{s(o.next(t))}catch(t){e(t)}}function u(t){try{s(o.throw(t))}catch(t){e(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(a,u)}s((o=o.apply(n,r||[])).next())}));var n,r,i,o},t}(),i=(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)});const o=function(t){function e(e){return t.call(this,"Can't load URL \"".concat(e,'"'))||this}return i(e,t),e}(Error),a=function(){function t(){}return t.prototype.requestTextContent=function(e){return t.requestUrl(e).then((function(t){return t.text()}))},t.prototype.loadFileFrom=function(e){return t.requestUrl(e).then((function(t){return t.blob()}))},t.requestUrl=function(t){return fetch(t).then((function(e){if(!e.ok)throw new o(t);return e}))},t}(),u=new a;var s=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const f=function(t){function e(e){var n=t.call(this)||this;return n.proxyURL=e,n}return s(e,t),e.prototype.requestTextContent=function(e){return t.prototype.requestTextContent.call(this,this.generateProxyUrl(e))},e.prototype.loadFileFrom=function(e){return t.prototype.loadFileFrom.call(this,this.generateProxyUrl(e))},e.prototype.generateProxyUrl=function(t){return this.proxyURL+encodeURIComponent(t)},e}(a);var c=[new f("https://proxy.mangaraiku.eu.org/?url="),new f("https://api.codetabs.com/v1/proxy?quest="),new(function(){function t(){}return t.prototype.requestTextContent=function(e){return t.requestUrl(e).then((function(t){return t.contents}))},t.prototype.loadFileFrom=function(t){return this.requestTextContent(t).then((function(t){return fetch(t).then((function(t){return t.blob()}))}))},t.requestUrl=function(t){var e="https://api.allorigins.win/get?url="+encodeURIComponent(t);return fetch(e).then((function(e){if(!e.ok)throw new o(t);return e.json()})).then((function(e){var n=e.status.http_code;if(n<200&&n>299)throw new o(t);return e}))},t}())];function l(t){for(var e=c.concat([]).sort((function(){return Math.random()>Math.random()?1:-1})),n=t(u),r=function(e){n=n.catch((function(n){return t(e)}))},i=0,o=e;i<o.length;i++)r(o[i]);return n}const p=new n("Converting downloaded text to DOM",(function(t){return(new DOMParser).parseFromString(t,"text/html")}));function h(t){var e=t.querySelector('meta[itemprop="datePublished"][content]');if(e)try{return new Date(e.getAttribute("content"))}catch(t){}var n=t.querySelector('time[itemprop="startDate"][datetime]');if(n)try{return new Date(n.getAttribute("datetime"))}catch(t){}var r=v(t,["article:published_time","article:modified_time","book:release_date","og:article:published_time","og:article:modified_time","og:book:release_date"]);if(r)try{return new Date(r)}catch(t){}return new Date}function m(t){var e=v(t,["author"]);if(e)return e;var n=t.querySelector('[itemprop="author"] meta[itemprop="name"][content]');if(n)return n.getAttribute("content");var r=t.querySelector('[itemprop="author"]');return r?r.textContent:""}function d(t){var e=t.querySelector('[itemprop="publisher"] meta[itemprop="name"][content]');return e?e.getAttribute("content"):v(t,["publisher","owner","copyright","og:site_name"])}function g(t){return v(t,["description","og:description","subtitle","abstract"])||""}function y(t){var e=v(t,["news_keywords","keywords"]);return e?e.split(/\s*,\s*/):[]}function v(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=t.querySelector('meta[name="'.concat(i,'"][content]'));if(o){var a=o.getAttribute("content").trim();if(a)return a}}return null}const w=new n("Retrieving metadata from HTML document",(function(t,e){return{title:t.title,date:h(t),author:m(t),publisher:d(t)||e,uuid:e,description:g(t),tags:y(t)}}));var b=[].concat(["map","embed","object","video","audio","iframe","canvas","applet","frameset","track","portal","source","frame","param","shadow"],["button","input","textarea","select","output","datalist","keygen"],["base","script","meta","link","style","template","slot"],["menu","command","nav","menuitem"],["svg"]);function x(t){for(var e=t.length-1;e>=0;e--)t[e].remove()}const _=new n("Removing unused HTML elements",(function(t){!function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];x(t.getElementsByTagName(i))}}(t,b)})),A=new n("Removing HTML hidden elements",(function(t){for(var e=t.querySelectorAll("[hidden]"),n=0,r=Array.from(e);n<r.length;n++)r[n].remove()})),E=new n("Removing all HTML comments",(function(t){for(var e,n=[],r=t.createNodeIterator(t.documentElement,NodeFilter.SHOW_COMMENT,(function(){return NodeFilter.FILTER_ACCEPT}));e=r.nextNode();)n.push(e);for(var i=0,o=n;i<o.length;i++)o[i].remove()}));var S=["SPAN","ABBR","CITE","EM","I","B","SUB","SUP","SMALL","STRONG","MARK","DEL","S","CODE","P","OL","UL","LI","DIV","PRE","BLOCKQUOTE","LABEL","ASIDE","ADDRESS","H1","H2","H3","H4","H5","H6","MAIN","SECTION","HEADER","ARTICLE","FOOTER","SUMMARY","DETAILS","TABLE","CAPTION","THEAD","TBODY","TFOOT"];function T(t){if(function(t){return-1!==S.indexOf(t.tagName)&&!t.innerHTML.trim()}(t)){var e=t.parentElement;t.remove(),T(e)}}const P=new n("Removing empty HTML elements",(function(t){for(var e,n=[],r=t.createNodeIterator(t.documentElement,NodeFilter.SHOW_ELEMENT,(function(){return NodeFilter.FILTER_ACCEPT}));e=r.nextNode();)n.push(e);for(var i=0,o=n;i<o.length;i++)T(o[i])}));function O(t,e){e(t);for(var n=0,r=Array.from(t.children);n<r.length;n++)O(r[n],e)}const B=new n("Removing custom attributes",(function(t){!function(t,e){O(t.documentElement,(function(t){for(var e=[],n=0,r=Array.from(t.attributes);n<r.length;n++)0===(a=r[n]).name.indexOf("data-")&&e.push(a);for(var i=0,o=e;i<o.length;i++){var a=o[i];t.removeAttribute(a.name)}}))}(t)}));var R=[].concat(["onafterprint","onbeforeprint","onbeforeunload","onerror","onhashchange","onload","onmessage","onoffline","ononline","onpagehide","onpageshow","onpopstate","onresize","onstorage","onunload"],["onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onsearch","onselect","onsubmit"],["onkeydown","onkeypress","onkeyup"],["onclick","ondblclick","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onwheel"],["ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onscroll"],["oncopy","oncut","onpaste"],["ontoggle"]),k=[].concat(["style","class"],["background","bgcolor","border"],R,["contextmenu","draggable","tabindex","for","autocomplete","capture","contenteditable","crossorigin","dirname","enterkeyhint","form","formaction","formenctype","formmethod","formnovalidate","formtarget","inputmode","list","maxlength","minlength","max","min","novalidate","pattern","readonly","required","spellcheck","step","usemap","autofocus"],["loading","ping","slot","sizes","decoding","crossorigin","elementtiming","fetchpriority","referrerpolicy","sizes"],["accept","accept-charset","action","enctype","method"],["srcset","attributionsrc"]);const C=new n("Removing unused element attributes",(function(t){for(var e=0,n=k;e<n.length;e++)for(var r=n[e],i=t.querySelectorAll("[".concat(r,"]")),o=0,a=Array.from(i);o<a.length;o++)a[o].removeAttribute(r)}));function U(t){for(var e=Array.from(t.childNodes),n=!1,r=e.length-1;r>=0;r--){var i=e[r],o=i.nodeType===Node.TEXT_NODE;if(n&&o){var a=e[r+1];i.nodeValue+=a.nodeValue,a.remove()}n=o}for(var u=0,s=Array.from(t.children);u<s.length;u++){var f=s[u];f.childNodes&&U(f)}}const I=new n("Merging text nodes",(function(t){U(t.documentElement)}));const j=new n("Removing extra whitespaces",(function(t){for(var e,n=t.createNodeIterator(t.documentElement,NodeFilter.SHOW_TEXT,(function(){return NodeFilter.FILTER_ACCEPT}));e=n.nextNode();)(function(t){var e=t.parentElement.tagName;return-1==["PRE","CODE"].indexOf(e)})(r=e)&&(r.nodeValue=r.nodeValue.replace(/\r/g,"").replace(/\t/g," ").replace(/  +/g," ").replace(/\n[\n ]+/g,"\n").replace(/ +\n/g,"\n"));var r}));function D(t){return t instanceof XMLDocument?function(t){return 0===t.rootElement.children.length}(t):function(t){return 0===t.children.length}(t)}const L=new n("Remove empty SVGs",(function(t){Array.from(t.querySelectorAll("svg")).filter(D).forEach((function(t){return t.remove()}));var e=new DOMParser;Array.from(t.querySelectorAll("img[src]")).filter((function(t){return t.getAttribute("src").startsWith("data:image/svg+xml")})).forEach((function(t){var n=t.getAttribute("src");fetch(n).then((function(t){return t.text()})).then((function(t){return e.parseFromString(t,"text/xml")})).then((function(e){D(e)&&t.remove()}))}))}));const M=new n("Cleaning HTML document",(function(t){return e=this,i=void 0,a=function(){var e,i;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}(this,(function(o){switch(o.label){case 0:return e=new n(null,(function(){return t})),(i=new r).addStep(e),i.addStep(_,[e]),i.addStep(A,[e]),i.addStep(E,[e]),i.addStep(P,[e]),i.addStep(B,[e]),i.addStep(C,[e]),i.addStep(I,[e]),i.addStep(j,[e]),i.addStep(L,[e]),[4,i.process((function(){}),(function(){}))];case 1:return o.sent(),[2]}}))},new((o=void 0)||(o=Promise))((function(t,n){function r(t){try{s(a.next(t))}catch(t){n(t)}}function u(t){try{s(a.throw(t))}catch(t){n(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(r,u)}s((a=a.apply(e,i||[])).next())}));var e,i,o,a}));function N(t,e){!function(t,e){for(var n=0,r=Array.from(t.attributes);n<r.length;n++){var i=r[n];e.setAttribute(i.name,i.value)}}(t,e),function(t,e){for(var n=0,r=Array.from(t.childNodes);n<r.length;n++){var i=r[n];t.removeChild(i),e.appendChild(i)}}(t,e),t.parentNode.replaceChild(e,t)}var q={H1:"h2",H2:"h3",H3:"h4",H4:"h5",H5:"h6"};const F=new n("Reducing the heading level",(function(t){if(function(t){return Array.from(t.querySelectorAll("h1")).length>0}(t))for(var e,n,r=0,i=Array.from(t.querySelectorAll("h1, h2, h3, h4, h5, h6"));r<i.length;r++){void 0,n=function(t){var e=t.tagName;if("H6"===e){var n=document.createElement("p");return n.setAttribute("role","heading"),n.setAttribute("aria-level","7"),n}return document.createElement(q[e])}(e=i[r]),N(e,n)}})),Y=new n("Choosing the main content from HTML document",(function(t){var e=t.querySelectorAll("main article");if(1===e.length)return e[0];var n=t.querySelector('main, [role="main"]');return n||(t.querySelector("article")||t.body)}));function z(t,e){for(var n=[],r=0,i=e.reverse();r<i.length;r++){for(var o=[],a=i[r];a!==t;)o.push(a),a=a.parentNode;var u=document.createElement("div"),s=H(o,u);""!==u.innerText.trim()&&n.push({title:s,element:u})}return n.reverse()}function H(t,e){var n,r=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([],t,!0),i=r.pop(),o=i.parentNode;if(r.length>0){var a=function(t){var e=t.tagName,n=document.createElement(e);return function(t,e){for(var n=0,r=Array.from(t.attributes);n<r.length;n++){var i=r[n];e.setAttribute(i.name,i.value)}}(t,n),n}(i);n=H(r,a),e.appendChild(a)}return function(t,e,n){for(var r=!1,i=0,o=Array.from(t.childNodes);i<o.length;i++){var a=o[i];r?(t.removeChild(a),e.appendChild(a)):a===n&&(r=!0)}}(o,e,i),0===r.length&&(i.remove(),n=i.innerText),n}const W=new n("Splitting the main content from HTML document by headings",(function(t,e){var n=Array.from(t.getElementsByTagName("h2"));if(0===n.length)return[{title:e.title,element:t}];if(n.length>1)return z(t,n);var r=Array.from(t.getElementsByTagName("h3"));return z(t,n.concat(r))}));function Z(t){N(t,document.createElement("div"))}const G=new n("Converting noscript tags to div",(function(t){Array.from(t.querySelectorAll("noscript")).forEach(Z)}));var X=__webpack_require__(214),Q=__webpack_require__.n(X);var V=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},K=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},J=new DOMParser;const $=new n("Loading images",(function(t,e){return V(this,void 0,void 0,(function(){var n,r,i,o;return K(this,(function(a){var u;return n=function(){var t=this,e={};return function(n){var r=n.getAttribute("src");if(r in e)return e[r];var i=function(t){return l((function(e){return e.loadFileFrom(t)}))}(r).then((function(e){return V(t,void 0,void 0,(function(){var t;return K(this,(function(n){switch(n.label){case 0:if(!e.type.startsWith("image/"))throw new Error;return"image/svg+xml"!==e.type?[3,2]:[4,e.text()];case 1:if(t=n.sent(),D(J.parseFromString(t,"text/xml")))throw new Error;n.label=2;case 2:return[2,{id:Q()(r),blob:e}]}}))}))})).catch((function(t){return fetch("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAAAXNSR0IArs4c6QAAAjRJREFUeNrF1d1rzXEcwPHXOXPmjObpNMccNtMa5fGCPOWZccIuUEpYXJCQ1GykPCtP4SDMPEQkUywZViLPidLKDf+Av8GdcyHf+oVju9n7ff151/fzufjqSeIGqtRtilTaLAdFUiq77DhNjhhE0nRNWrrkNa1uapCAWb7Lqe2CSzW6YSNAzkVRivQT82eSFnhgNYjry0sTEIgpMd5Ko6REielriWeWAfrL0gkCxWZotlazHWKR8YFWeWsugLQmooG07YZhuONSAnHlNnliEv8O1HgkJSZji1nCVqo0eWA0hQIl5tpivKyjAHoZ7YhbMhQOUGqddouUAhImOuucflA4EKXYFNcdEqNwIGG4GgR6m+2eRigcSJis1XshkVSr3Wb+HQj3b8u7/1ciplSdF+r8ncEa6AS9zdPhGFL2+2CUMhu8NlN4TLVhfwskZb2yE1DmpC8aPDdROO4i79yUiQR20ilpmY82CHuf6qGnqgExA6zwWc5t1wyNBr6q80Edwi7uOykNKJKxzWdrUKFVs3Ih0MgPL00Xxmdrs0cfxA1QpcZhb8wHVLjrvCGEK3xTA79X+chWQIklWrXoMEagwh2npQlnDOMLPVYvUKpem0EQSZyQRtou3hoMkhbrsFxhQqLcXvY5KCUp65la+O/EKfOdZ4JLdlio3TQkZFT9wZGizvHJO+uJq3bdLWNBmd0u/PZi3kt5m/NelldL3it5r+bNyUK5emeM0G3WOyBF91mluEe/6J+j257vXdKuCgAAAABJRU5ErkJggg==").then((function(t){return t.blob()})).then((function(t){return{id:"no-image",blob:t}}))}));return e[r]=i,i}}(),u=e,r=function(t){var e=t.getAttribute("src").trim(),n=new URL(e,u).toString();t.setAttribute("src",n)},i=function(t){return Array.from(t.querySelectorAll("img[src]")).filter((function(t){return t.getAttribute("src").trim()}))}(t).filter((function(t){return!t.getAttribute("src").startsWith("data:")})),i.forEach(r),o=i.map((function(t){return n(t).then((function(e){return function(t,e){var n=document.createComment("<%= image['".concat(e.id,"'] %>"));t.parentNode.replaceChild(n,t)}(t,e),e}))})),[2,Promise.allSettled(o).then((function(t){return t.filter((function(t){return"fulfilled"===t.status})).map((function(t){return t.value}))})).then((function(t){return Array.from(new Set(t))}))]}))}))}));var tt=__webpack_require__(927),et=__webpack_require__.n(tt),nt=function(){return nt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},nt.apply(this,arguments)};const rt=new n("Creating EPUB file",(function(t,e,n){return r=this,i=void 0,a=function(){var r,i,o,a,u;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}(this,(function(s){switch(s.label){case 0:for((r=new(et())).init(nt({i18n:"en"},e)),r.uuid(e.uuid),r.date(e.date),n.forEach((function(t){return r.image(t.blob,t.id)})),i=0,o=t;i<o.length;i++)a=o[i],r.add(a.title,a.content);return[4,r.generate("blob",(function(t){console.log("progression: "+t.percent.toFixed(2)+" %"),t.currentFile&&console.log("current file = "+t.currentFile)}))];case 1:return u=s.sent(),[2,{title:e.title,epub:u}]}}))},new((o=void 0)||(o=Promise))((function(t,e){function n(t){try{s(a.next(t))}catch(t){e(t)}}function u(t){try{s(a.throw(t))}catch(t){e(t)}}function s(e){var r;e.done?t(e.value):(r=e.value,r instanceof o?r:new o((function(t){t(r)}))).then(n,u)}s((a=a.apply(r,i||[])).next())}));var r,i,o,a}));function it(t,e){return new URL(t,e).href}function ot(t,e){if(function(t,e){return t.split("#")[0]===e.split("#")[0]}(e,t)){var n=t.split("#")[1];if(n)return"#".concat(n)}return t}const at=new n("Fix links",(function(t,e){for(var n=0,r=t.flatMap((function(t){return Array.from(t.querySelectorAll("a[href]"))}));n<r.length;n++){var i=r[n],o=i.getAttribute("href");o=ot(o=it(o,e),e),i.setAttribute("href",o)}return t})),ut=new n("Set external links to open in a new tab",(function(t){for(var e=0,n=t.flatMap((function(t){return Array.from(t.querySelectorAll('a[href^="http://"], a[href^="https://"]'))}));e<n.length;e++)n[e].setAttribute("target","_blank");return t}));function st(t,e){for(var n=0,r=t.length;n<r;n++)if(null!==t[n].querySelector("#".concat(e,',a[name="').concat(e,'"]')))return n;return-1}function ft(t){var e=document.createElement("span");N(t,e),e.removeAttribute("href")}function ct(t,e){var n=t.getAttribute("href"),r="page-".concat(e,".html").concat(n);t.setAttribute("href",r)}const lt=new n("Remove broken anchor links",(function(t){for(var e=0,n=t.length;e<n;e++)for(var r=t[e],i=0,o=Array.from(r.querySelectorAll('a[href^="#"]'));i<o.length;i++){var a=o[i],u=st(t,a.getAttribute("href").substring(1));-1===u?ft(a):u!==e&&ct(a,u)}return t}));const pt=new n("Fix links",(function(t,e){return i=this,o=void 0,u=function(){var i,o,a;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}(this,(function(u){switch(u.label){case 0:return i=new n(null,(function(){return t.map((function(t){return t.element}))})),o=new n(null,(function(){return e})),(a=new r).addStep(i),a.addStep(o),a.addStep(at,[i,o]),a.addStep(ut,[at]),a.addStep(lt,[at]),[4,a.process((function(){}),(function(){}))];case 1:return u.sent(),[2]}}))},new((a=void 0)||(a=Promise))((function(t,e){function n(t){try{s(u.next(t))}catch(t){e(t)}}function r(t){try{s(u.throw(t))}catch(t){e(t)}}function s(e){var i;e.done?t(e.value):(i=e.value,i instanceof a?i:new a((function(t){t(i)}))).then(n,r)}s((u=u.apply(i,o||[])).next())}));var i,o,a,u}));function ht(t){return t.map((function(t){return{title:t.title,content:(n=t.element,r=(new XMLSerializer).serializeToString(n),i=(new DOMParser).parseFromString(r,"text/html"),o=(new XMLSerializer).serializeToString(i),a=(new DOMParser).parseFromString(o,"text/html"),e=a.body.innerHTML,e.replace(/<!\-\-\s*<%= image\[/g,"<%= image[").replace(/] %>\s*\-\->/g,"] %>"))};var e,n,r,i,o,a}))}const mt=function(t,e,i){return o=this,a=void 0,s=function(){var o,a,u,s;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}(this,(function(f){switch(f.label){case 0:return o=new n(null,(function(){return t})),a=new n('Downloading "'.concat(t,'"'),(function(t){return l((function(e){return e.requestTextContent(t)}))})),u=new n(null,ht),(s=new r).addStep(o),s.addStep(a,[o]),s.addStep(p,[a]),s.addStep(w,[p,o]),s.addStep(M,[p]),s.addStep(F,[p]),s.addStep(Y,[p]),s.addStep(G,[Y]),s.addStep($,[Y,o]),s.addStep(W,[Y,w]),s.addStep(pt,[W,o]),s.addStep(u,[W]),s.addStep(rt,[u,w,$]),[4,s.process(e,i)];case 1:return[2,f.sent()]}}))},new((u=void 0)||(u=Promise))((function(t,e){function n(t){try{i(s.next(t))}catch(t){e(t)}}function r(t){try{i(s.throw(t))}catch(t){e(t)}}function i(e){var i;e.done?t(e.value):(i=e.value,i instanceof u?i:new u((function(t){t(i)}))).then(n,r)}i((s=s.apply(o,a||[])).next())}));var o,a,u,s};var dt=document.getElementById("form"),gt=document.querySelector("button[type=submit]"),yt=document.getElementById("progress");function vt(t){var e=t.title,n=t.epub,r=function(t){return t.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-")}(e),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.textContent="Download EPUB",o.download=r+".epub",document.body.appendChild(o),o.click(),o.remove(),wt(),setTimeout((function(){return URL.revokeObjectURL(i)}),18e5)}function wt(){gt.disabled=!1}function bt(t){yt.setAttribute("max",t.toString())}function xt(t){yt.setAttribute("value",t.toString())}dt.onsubmit=function(t){t.preventDefault(),gt.disabled=!0;var e=document.getElementById("url").value;return mt(e,xt,bt).catch((function(t){throw wt(),alert(t.message),t})).then(vt),!1}})()})();